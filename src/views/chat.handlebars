<html lang='es'>
  <head>
    <title>Chat - AVP e-commerce</title>
    <meta charset='UTF-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <link
      href='https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css'
      rel='stylesheet'
      integrity='sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65'
      crossorigin='anonymous'
    />

    <link
      href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css'
      rel='stylesheet'
    />

    <link rel='stylesheet' href='/css/styles.css' />

    <script
      src='https://cdn.jsdelivr.net/npm/normalizr@3.6.1/dist/normalizr.browser.min.js'
    ></script>
  </head>

  <body>
    {{! Comienzo barra de navegación }}
    <nav class='navbar navbar-expand-lg navbar-dark bg-dark'>
      <div class='container'>
        <a class='navbar-brand' href='/'>
          <i
            id='logo'
            class='bx bxs-shopping-bag bx-rotate-90 bx-tada bx-md'
          ></i>
        </a>
        <button
          class='navbar-toggler'
          type='button'
          data-bs-toggle='collapse'
          data-bs-target='#navbar-list-4'
          aria-controls='navbarNav'
          aria-expanded='false'
          aria-label='Toggle navigation'
        >
          <span class='navbar-toggler-icon'></span>
        </button>

        <div class='collapse navbar-collapse' id='navbar-list-4'>
          <ul class='navbar-nav align-items-center'>
            <li class='nav-item'>
              <a class='nav-link active' aria-current='page' href='/'>
                <i id='logo-title'>AVP e-commerce</i>
              </a>
            </li>
            <li class='nav-item'>
              <a class='nav-link' aria-current='page' href='cart.html'>
                Carrito
              </a>
            </li>
            <li class='nav-item'>
              <a class='nav-link' aria-current='page' href='chat'>Chat</a>
            </li>
          </ul>
        </div>

        <div
          class='collapse navbar-collapse justify-content-end'
          id='navbar-list-4'
        >
          <ul class='navbar-nav align-items-center'>
            {{! Acá se introducirá la información de usuario o los botones de login y signup }}
            <li id='user' class='nav-item dropdown'></li>
          </ul>
        </div>
      </div>
    </nav>
    {{! Fin barra de navegación }}

    {{! En esta sección se encuentra el formulario de ingreso de mensajes y la vista de estos }}
    <section id='message-center'>
      <div class='container py-5 min-vh-70'>
        <form class='col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3 float-right dark' role='search'>
          <input
            type='search'
            class='form-control form-control-dark text-bg-dark'
            placeholder='Filtrar chat por email'
            aria-label='Search'
          />
        </form>

        <h1>Chat</h1>
        <hr />
        <form id='add-message-form' class='row g-3 needs-validation' novalidate>
          {{! Campo de email }}
          <div class='form-group col-md-6'>
            <label for='input-email' class='form-label'>Email</label>
            <div class='input-group has-validation'>
              <span class='input-group-text' id='inputGroupFusion'>@</span>
              <input
                id='input-email'
                class='form-control'
                type='email'
                name='email'
                aria-describedby='inputGroupFusion'
                placeholder='john-doe@example.com'
                required
              />
            </div>
          </div>

          {{! Campo de selección de tipo de mensaje }}
          <div class='form-group col-md-6'>
            <label for='message-type' class='form-label'>Tipo de mensaje</label>
            <div class='input-group has-validation'>
              <select
                id='message-type'
                class='form-control'
                name='message-type'
                required
              >
                <option value=''>Elije una opción</option>
                <option value='Usuario'>Usuario</option>
                <option value='Sistema'>Sistema</option>
              </select>
            </div>
          </div>

          {{! Acá se inserta la lista de mensajes en caso de que existan }}
          <div id='message-list'></div>

          {{! Campo de cuerpo del mensaje }}
          <div class='form-group'>
            <label for='input-message' class='form-label'>Mensaje</label>
            <div class='input-group has-validation'>
              <textarea
                disabled
                id='input-message'
                class='form-control'
                type='text'
                cols='30'
                rows='5'
                placeholder='Mensaje a enviar'
                required
              ></textarea>
            </div>
          </div>

          {{! Botón para envío del mensaje }}
          <div class='col-md-12'>
            <button
              disabled
              id='btn-send'
              type='submit'
              class='btn btn-warning'
            >
              Enviar mensaje
            </button>
          </div>
        </form>
      </div>
    </section>

    {{! Comienzo footer  }}
    <footer class='footer mt-auto py-3 bg-light'>
      <div class='container text-center'>
        <span class='text-muted'>&copy;2022 Desarrollado por Alexis Velázquez</span>
      </div>
    </footer>
    {{! Fin footer }}

    {{! Inicio de scripts  }}
    <script
      src='https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js'
      integrity='sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3'
      crossorigin='anonymous'
    ></script>

    <script
      src='https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js'
      integrity='sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V'
      crossorigin='anonymous'
    ></script>

    <!-- JS Handlebars -->
    <script
      src='https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js'
      integrity='sha512-RNLkV3d+aLtfcpEyFG8jRbnWHxUqVZozacROI4J2F1sTaDqo1dPQYs01OMi1t1w9Y2FdbSCDSQ2ZVdAC8bzgAg=='
      crossorigin='anonymous'
      referrerpolicy='no-referrer'
    ></script>

    <!-- JS to use socketIO inside of index.js -->
    <script src='./socket.io/socket.io.js'></script>

    <!-- JS para validar formulario -->
    <script src='./js/auth/formValidator.js'></script>

    <!-- JS Obtener información de usuario -->
    <script src='./js/auth/getUser.js'></script>

    <!-- JS Logout -->
    <script src='./js/auth/logout.js'></script>

    <!-- JS client -->
    <script src='./js/chat/client.js'></script>
  </body>
</html>